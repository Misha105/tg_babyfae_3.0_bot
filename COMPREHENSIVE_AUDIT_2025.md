# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ê—É–¥–∏—Ç –ü—Ä–æ–µ–∫—Ç–∞ Babyfae 3.0

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞**: 25 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞**: 3.0.0  
**–ê—É–¥–∏—Ç–æ—Ä**: GitHub Copilot (Claude Opus 4.5)

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#1-–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#2-–∞—É–¥–∏—Ç-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
3. [–ê—É–¥–∏—Ç –Ω–∞ –æ—à–∏–±–∫–∏ –∏ –ø–ª–æ—Ö—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é](#3-–∞—É–¥–∏—Ç-–Ω–∞-–æ—à–∏–±–∫–∏-–∏-–ø–ª–æ—Ö—É—é-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é)
4. [–ê—É–¥–∏—Ç –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–æ—Ä–∞–±–æ—Ç–æ–∫](#4-–∞—É–¥–∏—Ç-–¥–ª—è-—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞-–∏-–¥–æ—Ä–∞–±–æ—Ç–æ–∫)
5. [–û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#5-–æ–±—â–∏–µ-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

## 1. –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### 1.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Telegram Mini App                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Frontend (React + Vite + Zustand + Tailwind)               ‚îÇ
‚îÇ  - Port: 5173 (dev) / nginx:80 (prod)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Backend (Express + Node.js + SQLite)                       ‚îÇ
‚îÇ  - Port: 3000                                               ‚îÇ
‚îÇ  - Telegram Bot API (node-telegram-bot-api)                 ‚îÇ
‚îÇ  - Scheduler (node-cron)                                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Database (SQLite + WAL mode)                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.2 –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-------|----------|
| Backend Entry | `bot/src/index.ts` | Express —Å–µ—Ä–≤–µ—Ä, –º–∞—Ä—à—Ä—É—Ç—ã, middleware |
| Telegram Bot | `bot/src/telegram.ts` | Polling –±–æ—Ç |
| Auth | `bot/src/middleware/auth.ts` | Telegram WebApp –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| Handlers | `bot/src/handlers/*.ts` | API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ |
| Database | `bot/src/database/*.ts` | SQLite –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ö–µ–ª–ø–µ—Ä—ã |
| Validation | `bot/src/utils/validation.ts` | –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| Scheduler | `bot/src/scheduler/index.ts` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é |
| Frontend App | `frontend/src/App.tsx` | –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç React |
| State | `frontend/src/store/index.ts` | Zustand store |
| API Client | `frontend/src/lib/api/client.ts` | HTTP –∫–ª–∏–µ–Ω—Ç —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π |
| Offline Queue | `frontend/src/lib/api/queue.ts` | –û—á–µ—Ä–µ–¥—å –¥–ª—è –æ—Ñ–ª–∞–π–Ω –æ–ø–µ—Ä–∞—Ü–∏–π |

---

## 2. –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 2.1 –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏

#### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CSP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ Nginx

**–§–∞–π–ª**: `frontend/nginx.conf`, `docker/nginx.conf`  
**–°—Ç—Ä–æ–∫–∏**: –í–µ—Å—å —Ñ–∞–π–ª  
**–û–ø–∏—Å–∞–Ω–∏–µ**: Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞–∂–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP, X-Content-Type-Options, X-XSS-Protection, Strict-Transport-Security).

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```nginx
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    # ... –±–µ–∑ security headers
}
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–æ–¥**:
```nginx
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    
    # Security Headers
    add_header X-Frame-Options "DENY" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://telegram.org; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://api.telegram.org; frame-ancestors 'none';" always;
    
    # HSTS (–≤–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ HTTPS –Ω–∞ —Ö–æ—Å—Ç–µ)
    # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    
    # ...–æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
}
```

**–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞**: –í–´–°–û–ö–ò–ô  
**OWASP**: A05:2021 ‚Äì Security Misconfiguration

---

#### üü† –°–†–ï–î–ù–ò–ô: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ DEV —Ä–µ–∂–∏–º–µ

**–§–∞–π–ª**: `frontend/src/lib/telegram/userData.ts`  
**–°—Ç—Ä–æ–∫–∏**: 35-38  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –í DEV —Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π mock ID `12345`, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–ª–ª–∏–∑–∏–∏ –¥–∞–Ω–Ω—ã—Ö –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –±—ç–∫–µ–Ω–¥.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
if (import.meta.env.DEV) {
    console.warn('Running in dev mode without Telegram context, using mock ID 12345');
    return 12345;
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è.

```typescript
if (import.meta.env.DEV) {
    const devId = parseInt(import.meta.env.VITE_DEV_USER_ID || '0') || 
                  Math.floor(Math.random() * 100000) + 100000;
    console.warn(`Running in dev mode, using ID ${devId}`);
    return devId;
}
```

**–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞**: –ù–ò–ó–ö–ò–ô

---

#### üü† –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ origin –¥–ª—è API –≤ scheduler

**–§–∞–π–ª**: `bot/src/scheduler/index.ts`  
**–°—Ç—Ä–æ–∫–∏**: 52-57  
**–û–ø–∏—Å–∞–Ω–∏–µ**: Scheduler –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ chat_id –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–º—É –∂–µ user_id. –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –ë–î –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å chat_id –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø–∞–º–∞.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
await bot.sendMessage(row.chat_id, message);
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è user_id –∏ chat_id:

```typescript
// –î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤ user_id === chat_id
if (row.user_id !== row.chat_id) {
    console.warn(`Suspicious schedule: user_id ${row.user_id} != chat_id ${row.chat_id}`);
    continue;
}
await bot.sendMessage(row.chat_id, message);
```

**–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞**: –°–†–ï–î–ù–ò–ô

---

#### üü† –°–†–ï–î–ù–ò–ô: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç Prototype Pollution

**–§–∞–π–ª**: `bot/src/handlers/data.ts`  
**–°—Ç—Ä–æ–∫–∏**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `safeJsonParse` –∏ spread –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (`...`) –≤–æ–∑–º–æ–∂–Ω–∞ –∞—Ç–∞–∫–∞ Prototype Pollution –µ—Å–ª–∏ JSON —Å–æ–¥–µ—Ä–∂–∏—Ç `__proto__` –∏–ª–∏ `constructor`.

**–ü—Ä–∏–º–µ—Ä —É—è–∑–≤–∏–º–æ–≥–æ –∫–æ–¥–∞**:
```typescript
const base = safeJsonParse(row.schedule_data, {});
const merged = { ...(base as any), id: row.id, ... };
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏:

```typescript
function sanitizeObject<T extends object>(obj: T): T {
  const cleaned = Object.create(null);
  for (const key of Object.keys(obj)) {
    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {
      continue;
    }
    cleaned[key] = obj[key as keyof T];
  }
  return cleaned as T;
}
```

**–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞**: –°–†–ï–î–ù–ò–ô  
**CWE**: CWE-1321 ‚Äì Improperly Controlled Modification of Object Prototype Attributes

---

#### üü° –ù–ò–ó–ö–ò–ô: Console.log –≤ production –∫–æ–¥–µ

**–§–∞–π–ª—ã**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã backend  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `console.log`, `console.warn`, `console.error` –≤–º–µ—Å—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ logger –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö.

**–ü—Ä–∏–º–µ—Ä—ã**:
- `bot/src/index.ts:107` ‚Äì `console.log('Bot started in polling mode')`
- `bot/src/handlers/api.ts:55` ‚Äì `console.log(\`Schedule ${id} updated...)`
- `bot/src/telegram.ts:29` ‚Äì `console.error('Polling error:', error.message)`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ console.* –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π logger:

```typescript
// –í–º–µ—Å—Ç–æ
console.log('Bot started in polling mode');
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
logger.info('Bot started in polling mode');
```

**–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞**: –ù–ò–ó–ö–ò–ô

---

#### üü° –ù–ò–ó–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª–∏–Ω—ã ID

**–§–∞–π–ª**: `bot/src/utils/validation.ts`  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –í–∞–ª–∏–¥–∞—Ü–∏—è ID (activity, schedule, growth record) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∏–ø, –Ω–æ –Ω–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ DoS –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö ID.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
if (!act.id || typeof act.id !== 'string') {
    return { valid: false, error: 'Activity ID is required and must be a string' };
}
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–æ–¥**:
```typescript
if (!act.id || typeof act.id !== 'string' || act.id.length > 100) {
    return { valid: false, error: 'Activity ID is required, must be a string and max 100 chars' };
}
```

**–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞**: –ù–ò–ó–ö–ò–ô

---

### 2.2 –°–≤–æ–¥–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| SQL Injection | ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã |
| XSS | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | CSP –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Nginx |
| CSRF | ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ | Telegram initData –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| IDOR | ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ | verifyUserAccess middleware |
| Authentication | ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ | HMAC-SHA256 —Å timing-safe —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º |
| Rate Limiting | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ | 3 —É—Ä–æ–≤–Ω—è –ª–∏–º–∏—Ç–æ–≤ |
| Input Validation | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã ID |
| Dependencies | ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã | express@5.1.0, node-telegram-bot-api@0.66.0 |

---

## 3. –ê—É–¥–∏—Ç –Ω–∞ –æ—à–∏–±–∫–∏ –∏ –ø–ª–æ—Ö—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

### 3.1 –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

#### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è –≤ Mutex

**–§–∞–π–ª**: `bot/src/database/db-helper.ts`  
**–°—Ç—Ä–æ–∫–∏**: 13-26  
**–û–ø–∏—Å–∞–Ω–∏–µ**: Mutex —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç busy-waiting —Å `while (this._locked)`, —á—Ç–æ –≤ —Ç–µ–æ—Ä–∏–∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ deadlock –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö race condition.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
async acquire(): Promise<() => void> {
    while (this._locked) {
      await this._queue;
    }
    this._locked = true;
    // ...
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–æ–π `while (this._locked)` –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π `this._locked = true` –º–æ–∂–µ—Ç –≤–∫–ª–∏–Ω–∏—Ç—å—Å—è –¥—Ä—É–≥–æ–π –≤—ã–∑–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```typescript
class Mutex {
  private _queue: Array<() => void> = [];
  private _locked = false;

  acquire(): Promise<() => void> {
    return new Promise((resolve) => {
      const tryAcquire = () => {
        if (!this._locked) {
          this._locked = true;
          resolve(() => {
            this._locked = false;
            const next = this._queue.shift();
            if (next) next();
          });
        } else {
          this._queue.push(tryAcquire);
        }
      };
      tryAcquire();
    });
  }
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: Deadlock –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –í–´–°–û–ö–ò–ô

---

#### üü† –°–†–ï–î–ù–ò–ô: Race condition –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª**: `frontend/src/store/index.ts`  
**–°—Ç—Ä–æ–∫–∏**: 92-162  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç merge –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
// Server is truth for what it has
const serverActivitiesMap = new Map((data.activities as ActivityRecord[]).map(a => [a.id, a]));
const mergedActivities = [...(data.activities as ActivityRecord[])];

for (const localActivity of currentActivities) {
  if (!serverActivitiesMap.has(localActivity.id)) {
    mergedActivities.push(localActivity);
  }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞), –æ–Ω–∞ –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `updatedAt` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:

```typescript
for (const localActivity of currentActivities) {
  const serverActivity = serverActivitiesMap.get(localActivity.id);
  if (!serverActivity) {
    // Activity missing from server - check if it was queued for sync
    if (isInOfflineQueue(localActivity.id)) {
      mergedActivities.push(localActivity);
    }
    // else: deleted on server, don't restore
  }
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –°–†–ï–î–ù–ò–ô

---

#### üü† –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ —Å–ª–∞–π—Å–∞—Ö

**–§–∞–π–ª**: `frontend/src/store/slices/createActivitySlice.ts`  
**–°—Ç—Ä–æ–∫–∏**: 23-28  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ–± –æ—à–∏–±–∫–µ.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
addActivity: (activity) => {
    set((state) => ({ activities: [activity, ...state.activities] }));
    const userId = getUserId();
    saveActivity(userId, activity).catch(() => {
      addToQueue('saveActivity', { userId, activity });
    });
},
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:

```typescript
import { showToast } from '@/lib/toast';

addActivity: (activity) => {
    set((state) => ({ activities: [activity, ...state.activities] }));
    const userId = getUserId();
    saveActivity(userId, activity).catch((error) => {
      addToQueue('saveActivity', { userId, activity });
      if (!navigator.onLine) {
        showToast('info', '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏');
      } else {
        showToast('warning', '–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –ø–æ–≤—Ç–æ—Ä–∏–º –ø–æ–∑–∂–µ');
      }
    });
},
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –°–†–ï–î–ù–ò–ô

---

#### üü° –ù–ò–ó–ö–ò–ô: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ –ø–∞–º—è—Ç–∏

**–§–∞–π–ª**: `frontend/src/features/calendar/CalendarView.tsx`  
**–°—Ç—Ä–æ–∫–∏**: 47-51  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `getLastActivityTime` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–∂–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
const getLastActivityTime = (type: ActivityType, subType?: string) => {
    const relevantActivities = activities.filter((a) => { ... });
    const last = relevantActivities.reduce((prev, current) => {
      return (new Date(prev.timestamp) > new Date(current.timestamp)) ? prev : current;
    });
};
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤:

```typescript
const getLastActivityTime = (type: ActivityType, subType?: string) => {
    // activities —É–∂–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ timestamp DESC –ø–æ—Å–ª–µ syncWithServer
    const last = activities.find((a) => {
      if (type === 'custom') return a.type === 'custom' && a.subType === subType;
      return a.type === type;
    });
    if (!last) return undefined;
    return formatDistanceToNow(new Date(last.timestamp), { ... });
};
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –õ–∏—à–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –ù–ò–ó–ö–ò–ô

---

### 3.2 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

#### üü† –°–†–ï–î–ù–ò–ô: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ getUserId

**–§–∞–π–ª—ã**: –í—Å–µ —Å–ª–∞–π—Å—ã –≤ `frontend/src/store/slices/`  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–π —Å–ª–∞–π—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é `getUserId`:

```typescript
// createActivitySlice.ts
const getUserId = () => getTelegramUserId() || 12345;

// createProfileSlice.ts  
const getUserId = () => getTelegramUserId() || 12345;

// createSettingsSlice.ts
const getUserId = () => getTelegramUserId() || 12345;
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ–±—â–∏–π —É—Ç–∏–ª–∏—Ç–Ω—ã–π –º–æ–¥—É–ª—å:

```typescript
// frontend/src/lib/telegram/userData.ts
export const getSafeUserId = (): number => {
  const id = getTelegramUserId();
  if (!id && import.meta.env.DEV) {
    return parseInt(import.meta.env.VITE_DEV_USER_ID || '12345');
  }
  return id || 0;
};
```

---

#### üü° –ù–ò–ó–ö–ò–ô: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ICON_MAP

**–§–∞–π–ª—ã**: `frontend/src/features/dashboard/Dashboard.tsx`, `frontend/src/features/settings/SettingsScreen.tsx`  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–π –æ–±—ä–µ–∫—Ç ICON_MAP –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ –¥–≤—É—Ö —Ñ–∞–π–ª–∞—Ö.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í—ã–Ω–µ—Å—Ç–∏ –≤ `frontend/src/lib/constants.ts`:

```typescript
export const ICON_MAP: Record<string, LucideIcon> = {
  star: Star,
  heart: Heart,
  // ...
};
```

---

### 3.3 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### üü† –°–†–ï–î–ù–ò–ô: N+1 –ø—Ä–æ–±–ª–µ–º–∞ –≤ —ç–∫—Å–ø–æ—Ä—Ç–µ

**–§–∞–π–ª**: `bot/src/handlers/data.ts`  
**–°—Ç—Ä–æ–∫–∏**: 311-368  
**–û–ø–∏—Å–∞–Ω–∏–µ**: `exportUserData` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã. –•–æ—Ç—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è streaming, —ç—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –ë–î.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```typescript
res.write(`,"profile":${user ? (user.profile_data || 'null') : 'null'}`);
await streamTable<ActivityRow>('activities', ...);
await streamTable<CustomActivityRow>('customActivities', ...);
await streamTable<GrowthRecordRow>('growthRecords', ...);
await streamTable<NotificationScheduleRow>('schedules', ...);
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

```typescript
const [activities, customActivities, growthRecords, schedules] = await Promise.all([
  dbAsync.all<ActivityRow>('SELECT data FROM activities WHERE telegram_id = ?', [telegramId]),
  dbAsync.all<CustomActivityRow>('SELECT data FROM custom_activities WHERE telegram_id = ?', [telegramId]),
  dbAsync.all<GrowthRecordRow>('SELECT data FROM growth_records WHERE telegram_id = ?', [telegramId]),
  dbAsync.all<NotificationScheduleRow>('SELECT * FROM notification_schedules WHERE user_id = ?', [telegramId])
]);
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –ú–µ–¥–ª–µ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä—ë–º–µ –¥–∞–Ω–Ω—ã—Ö  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–ò–ó–ö–ò–ô (streaming –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤)

---

#### üü° –ù–ò–ó–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ debounce –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–§–∞–π–ª**: `frontend/src/store/slices/createActivitySlice.ts`  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–µ–∑ debounce.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å debounce –¥–ª—è updateActivity:

```typescript
import { debounce } from '@/lib/utils';

const debouncedSave = debounce((userId: number, activity: ActivityRecord) => {
  saveActivity(userId, activity).catch(() => {
    addToQueue('saveActivity', { userId, activity });
  });
}, 500);
```

---

### 3.4 –°–≤–æ–¥–∫–∞ –ø–æ –æ—à–∏–±–∫–∞–º

| –¢–∏–ø | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----|------------|-------------|
| –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ | 4 | 1 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è, 2 —Å—Ä–µ–¥–Ω–∏—Ö, 1 –Ω–∏–∑–∫–∞—è |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | 2 | 1 —Å—Ä–µ–¥–Ω—è—è, 1 –Ω–∏–∑–∫–∞—è |
| –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | 2 | 1 —Å—Ä–µ–¥–Ω—è—è, 1 –Ω–∏–∑–∫–∞—è |

---

## 4. –ê—É–¥–∏—Ç –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–æ—Ä–∞–±–æ—Ç–æ–∫

### 4.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 4.1.1 –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Error Boundaries –¥–ª—è –∫–∞–∂–¥–æ–≥–æ feature

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –û–¥–∏–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π ErrorBoundary –≤ `main.tsx`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å ErrorBoundary –¥–ª—è –∫–∞–∂–¥–æ–π feature-–æ–±–ª–∞—Å—Ç–∏:

```tsx
// frontend/src/features/dashboard/Dashboard.tsx
import { ErrorBoundary } from '@/components/ui/ErrorBoundary';

export const DashboardWithBoundary = () => (
  <ErrorBoundary fallback={<DashboardError />}>
    <Dashboard />
  </ErrorBoundary>
);
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Nice-to-have  
**–£—Å–∏–ª–∏—è**: 2-3 —á–∞—Å–∞

---

#### 4.1.2 –í—ã–Ω–æ—Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏–∑ handlers

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: Handlers —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∫—É HTTP, —Ç–∞–∫ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π:

```
bot/src/
‚îú‚îÄ‚îÄ handlers/          # HTTP handlers only
‚îú‚îÄ‚îÄ services/          # Business logic
‚îÇ   ‚îú‚îÄ‚îÄ activity.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ growth.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ notification.service.ts
‚îÇ   ‚îî‚îÄ‚îÄ user.service.ts
‚îî‚îÄ‚îÄ repositories/      # Database access
    ‚îî‚îÄ‚îÄ base.repository.ts
```

**–ü—Ä–∏–º–µ—Ä**:
```typescript
// bot/src/services/activity.service.ts
export class ActivityService {
  async save(telegramId: number, activity: ActivityRecord): Promise<void> {
    const validation = validateActivity(activity);
    if (!validation.valid) {
      throw new ValidationError(validation.error);
    }
    await upsertRecord('activities', ...);
  }
}

// bot/src/handlers/data.ts
export const saveActivity = async (req: Request, res: Response) => {
  const telegramId = parseInt(req.params.id);
  try {
    await activityService.save(telegramId, req.body);
    res.json({ success: true });
  } catch (error) {
    if (error instanceof ValidationError) {
      return res.status(400).json({ error: error.message });
    }
    throw error;
  }
};
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Must-have –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è  
**–£—Å–∏–ª–∏—è**: 8-12 —á–∞—Å–æ–≤

---

#### 4.1.3 –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ TypeORM/Prisma

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ü—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã —Å —Ä—É—á–Ω—ã–º –º–∞–ø–ø–∏–Ω–≥–æ–º —Ç–∏–ø–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è type-safety –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ORM.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Prisma**:
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ IDE

**–£—Å–∏–ª–∏—è**: 16-24 —á–∞—Å–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Nice-to-have

---

### 4.2 –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### 4.2.1 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Unit —Ç–µ—Å—Ç–æ–≤

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –¢–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç (`"test": "echo \"Error: no test specified\" && exit 1"`)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å Jest –¥–ª—è backend –∏ Vitest –¥–ª—è frontend.

**–§–∞–π–ª—ã –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å**:
1. `bot/src/utils/validation.ts` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
2. `bot/src/middleware/auth.ts` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
3. `bot/src/database/db-utils.ts` - upsertRecord
4. `frontend/src/lib/dateUtils.ts` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞**:
```typescript
// bot/src/utils/validation.test.ts
describe('validateUserId', () => {
  it('should accept valid user ID', () => {
    expect(validateUserId(123456)).toEqual({ valid: true });
  });

  it('should reject negative ID', () => {
    expect(validateUserId(-1)).toEqual({ 
      valid: false, 
      error: 'Invalid user ID range' 
    });
  });

  it('should reject ID > MAX_INT', () => {
    expect(validateUserId(2147483648)).toEqual({ 
      valid: false, 
      error: 'Invalid user ID range' 
    });
  });
});
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Must-have  
**–£—Å–∏–ª–∏—è**: 12-16 —á–∞—Å–æ–≤ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

---

#### 4.2.2 Integration —Ç–µ—Å—Ç—ã –¥–ª—è API

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å supertest –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è endpoints:

```typescript
// bot/src/handlers/data.test.ts
import request from 'supertest';
import app from '../index';

describe('POST /api/user/:id/activity', () => {
  it('should reject unauthenticated requests', async () => {
    const res = await request(app)
      .post('/api/user/123/activity')
      .send({ type: 'feeding', timestamp: new Date().toISOString() });
    
    expect(res.status).toBe(401);
  });
});
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Must-have  
**–£—Å–∏–ª–∏—è**: 8-12 —á–∞—Å–æ–≤

---

### 4.3 –£–¥–∞–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞

#### 4.3.1 –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã

**–§–∞–π–ª**: `frontend/src/features/settings/SettingsScreen.tsx`  
**–°—Ç—Ä–æ–∫–∞**: 1  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `ApiError`, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞.

```typescript
import { ApiError } from '@/lib/api/client';
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤: if (error instanceof ApiError && error.status === 429)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å, —ç—Ç–æ –≤–∞–ª–∏–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.

---

#### 4.3.2 –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

**–§–∞–π–ª**: `frontend/src/lib/telegram/init.ts`  
**–°—Ç—Ä–æ–∫–∏**: 34-35

```typescript
// HapticFeedback usually doesn't require mounting in recent SDKs
// try { if (hapticFeedback && !hapticFeedback.isMounted()) hapticFeedback.mount(); } catch (e) { console.warn('hapticFeedback mount failed', e); }
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –∏–ª–∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –∫–∞–∫ TODO.

---

### 4.4 –£–ª—É—á—à–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

#### 4.4.1 –ó–∞–º–µ–Ω–∞ `any` –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã

**–§–∞–π–ª—ã —Å `@typescript-eslint/no-explicit-any`**:

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∞ | –ö–æ–Ω—Ç–µ–∫—Å—Ç |
|------|--------|----------|
| `bot/src/telegram.ts` | 25 | request options |
| `bot/src/handlers/data.ts` | 471+ | import chunk processing |
| `frontend/src/lib/telegram/userData.ts` | 8 | initData user |
| `frontend/src/locales.ts` | 2 | locales record |

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
```typescript
// –í–º–µ—Å—Ç–æ
const validActivities = data.activities.filter((a: any) => a.id && a.type && a.timestamp);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
interface PartialActivity {
  id?: string;
  type?: string;
  timestamp?: string;
  [key: string]: unknown;
}
const validActivities = (data.activities as PartialActivity[])
  .filter((a): a is ActivityRecord => !!a.id && !!a.type && !!a.timestamp);
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Nice-to-have  
**–£—Å–∏–ª–∏—è**: 4-6 —á–∞—Å–æ–≤

---

### 4.5 –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π

| # | –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –£—Å–∏–ª–∏—è | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
|---|--------|-----------|--------|-------------|
| 1 | –î–æ–±–∞–≤–∏—Ç—å CSP –≤ Nginx | Must-have | 1 —á–∞—Å | - |
| 2 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å Mutex —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é | Must-have | 2 —á–∞—Å–∞ | - |
| 3 | –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è validation | Must-have | 4 —á–∞—Å–∞ | - |
| 4 | –î–æ–±–∞–≤–∏—Ç—å toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö | Must-have | 2 —á–∞—Å–∞ | - |
| 5 | –í—ã–Ω–µ—Å—Ç–∏ getUserId –≤ –æ–±—â–∏–π –º–æ–¥—É–ª—å | Should-have | 1 —á–∞—Å | - |
| 6 | –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª–∏–Ω—ã ID | Should-have | 1 —á–∞—Å | - |
| 7 | –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π | Should-have | 12 —á–∞—Å–æ–≤ | #3 |
| 8 | –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã | Should-have | 8 —á–∞—Å–æ–≤ | #7 |
| 9 | –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ICON_MAP | Nice-to-have | 30 –º–∏–Ω | - |
| 10 | –ó–∞–º–µ–Ω–∏—Ç—å console.* –Ω–∞ logger | Nice-to-have | 2 —á–∞—Å–∞ | - |
| 11 | –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Prisma | Nice-to-have | 24 —á–∞—Å–∞ | #7, #8 |

---

## 5. –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 5.1 –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏)

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ Nginx
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å Mutex –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è deadlock
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª–∏–Ω—ã ID

2. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**:
   - ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ESLint —Å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å pre-commit hooks (husky + lint-staged)

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI pipeline –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

### 5.2 –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
   - –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
   - –í–Ω–µ–¥—Ä–∏—Ç—å Repository pattern

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Prometheus)

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
   - –î–æ–±–∞–≤–∏—Ç—å OpenAPI/Swagger –¥–ª—è API
   - –°–æ–∑–¥–∞—Ç—å Architecture Decision Records (ADR)

### 5.3 –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)

1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ PostgreSQL –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –í—ã–Ω–µ—Å—Ç–∏ bot polling –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π worker process

2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
   - –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è conflict resolution
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π offline-first —Å CRDTs

3. **Compliance**:
   - –î–æ–±–∞–≤–∏—Ç—å Privacy Policy
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å GDPR-compliant data retention

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç Babyfae 3.0 –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ö–æ—Ä–æ—à–∏–π –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∞—É–¥–∏—Ç–∞. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, rate limiting) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö | –í—ã—Å–æ–∫–∏—Ö | –°—Ä–µ–¥–Ω–∏—Ö | –ù–∏–∑–∫–∏—Ö |
|-----------|-------------|---------|---------|--------|
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 0 | 1 | 3 | 2 |
| –û—à–∏–±–∫–∏ | 1 | 0 | 3 | 2 |
| –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ | - | - | - | - |

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Mutex –∏ –¥–æ–±–∞–≤–∏—Ç—å CSP –≤ Nginx
2. **–í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏**: –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –∏ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. **–í —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞**: –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –∏ CI/CD pipeline

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production**: 7/10

–ü–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–º–µ—á–∞–Ω–∏–π: 9/10

---

*–û—Ç—á—ë—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: 25 –Ω–æ—è–±—Ä—è 2025*  
*–í–µ—Ä—Å–∏—è –æ—Ç—á—ë—Ç–∞: 1.0*
